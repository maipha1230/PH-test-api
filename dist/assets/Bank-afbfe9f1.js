import{r as s,a as m,j as _,b as e,B as o,o as x,k as v,T as F,D as T,V as S}from"./index-067de1a3.js";import{F as W,T as D,B as d,c as j,a as C}from"./formik.esm-21fb3e16.js";import{D as $,a as V,b as E,c as I}from"./DataGrid-de4d3367.js";import"./index-4d501b15.js";const N=j().shape({bank_name_th:C().required("กรุณากรอกชื่อไทยของธนาคาร"),bank_name_en:C().required("กรุณากรอกชื่ออังกฤษของธนาคาร")});function R({open:r,handleDialogClose:h,bankId:i=null}){const[k,u]=s.useState({bank_name_th:"",bank_name_en:""});s.useEffect(()=>{b()},[r,h]);const l=()=>{g(),h()},g=()=>{u({bank_name_th:"",bank_name_en:""})},b=async()=>{if(i){const a=await m.get(`/banks/get-bank/${i}`);a.status==200&&u({bank_name_th:a.data.bank_name_th,bank_name_en:a.data.bank_name_en})}};return _($,{open:r,onClose:l,fullWidth:!0,children:[e(V,{children:i?"แก้ไขธนาคาร":"เพิ่มธนาคาร"}),e(E,{children:e(W,{onSubmit:async a=>{if(i){const t=await m.put(`/banks/update-bank/${i}`,{bank_name_th:a.bank_name_th,bank_name_en:a.bank_name_en});t.status==201&&x(t.data).then(()=>{l()})}else{const t=await m.post("/banks/create-bank",{bank_name_th:a.bank_name_th,bank_name_en:a.bank_name_en});t.status==201&&x(t.data).then(()=>{l()})}},initialValues:k,validationSchema:N,enableReinitialize:!0,children:({values:a,errors:t,touched:c,handleBlur:n,handleChange:f,handleSubmit:p,isValid:w,dirty:y})=>e("form",{onSubmit:p,style:{width:"100%",marginTop:"1rem"},children:_(o,{display:"flex",flexDirection:"column",gap:"1rem",sx:{width:"100%"},children:[e(D,{fullWidth:!0,variant:"outlined",type:"text",label:"ชื่อธนาคาร(ไทย)",onBlur:n,onChange:f,value:a.bank_name_th,name:"bank_name_th",error:!!c.bank_name_th&&!!t.bank_name_th,helperText:c.bank_name_th&&t.bank_name_th}),e(D,{fullWidth:!0,variant:"outlined",type:"text",label:"ชื่อธนาคาร(อังกฤษ)",onBlur:n,onChange:f,value:a.bank_name_en,name:"bank_name_en",error:!!c.bank_name_en&&!!t.bank_name_en,helperText:c.bank_name_en&&t.bank_name_en}),_(o,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:2,children:[e(d,{type:"submit",color:"success",variant:"contained",disabled:!w||!y,children:"บันทัก"}),e(d,{color:"inherit",variant:"contained",onClick:l,children:"ยกเลิก"})]})]})})})})]})}function G(){v();const[r,h]=s.useState(null),[i,k]=s.useState(!1),[u,l]=s.useState(null);s.useEffect(()=>{b()},[i]);const g=[{field:"bank_name_th",headerName:"ธนาคาร(ไทย)",flex:1},{field:"bank_name_en",headerName:"ธนาคาร(อังกฤษ)",flex:1},{field:"bank_id",headerName:"จัดการ",flex:1,renderCell:n=>_(o,{display:"flex",flexDirection:"row",gap:1,justifyContent:"center",alignItems:"center",width:"50%",children:[e(d,{fullWidth:!0,color:"warning",variant:"contained",onClick:()=>B(n.value),children:"แก้ไข"}),e(d,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>a(n.value),children:"ลบ"})]})}],b=async()=>{const n=await m.get("/banks/get-banks");n.status==200&&h(n.data)},B=n=>{l(n),t()},a=n=>{S().then(f=>{f.isConfirmed&&m.delete(`banks/remove-bank/${n}`).then(p=>{p.status==200&&x(p.data).then(()=>{b()})})})},t=()=>{k(!0)};return _(o,{display:"flex",flexDirection:"column",p:2,children:[e(F,{variant:"h5",children:"ธนาคาร"}),e(T,{}),e(o,{pt:1.5,children:e(d,{variant:"contained",color:"success",onClick:t,children:"เพิ่มธนาคาร"})}),e(o,{width:"100%",maxWidth:"100wh",height:"70vh",mt:3,children:r&&e(I,{rows:r,columns:g,getRowId:n=>n.bank_id,showCellVerticalBorder:!0,showColumnVerticalBorder:!0})}),i&&e(R,{open:i,handleDialogClose:()=>{k(!1),l(null)},bankId:u})]})}export{G as default};
