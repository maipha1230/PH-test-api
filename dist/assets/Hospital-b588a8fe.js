import{g as J,c as Q,_ as A,u as lt,d as x,e as X,b as s,s as W,f as rt,h as D,r as _,i as Y,k as Z,l as w,j as $,m as L,n as tt,a as z,B as R,T as U,o as E,p as ct,q as pt,P as dt,D as ut,t as gt}from"./index-db8e830d.js";import{F as ht,T as S,B as H,c as ft,a as F}from"./formik.esm-91bbe9aa.js";import{F as j,L as G,D as at,a as et,b as ot,M as vt}from"./index-1b085ff7.js";import{G as V}from"./Grid-52ff4281.js";function mt(t){return J("MuiPagination",t)}Q("MuiPagination",["root","ul","outlined","text"]);const bt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function xt(t={}){const{boundaryCount:a=1,componentName:e="usePagination",count:n=1,defaultPage:m=1,disabled:f=!1,hideNextButton:u=!1,hidePrevButton:c=!1,onChange:b,page:g,showFirstButton:C=!1,showLastButton:k=!1,siblingCount:l=1}=t,i=A(t,bt),[o,p]=lt({controlled:g,default:m,name:e,state:"page"}),h=(d,B)=>{g||p(B),b&&b(d,B)},r=(d,B)=>{const it=B-d+1;return Array.from({length:it},(St,nt)=>d+nt)},y=r(1,Math.min(a,n)),v=r(Math.max(n-a+1,a+1),n),M=Math.max(Math.min(o-l,n-a-l*2-1),a+2),N=Math.min(Math.max(o+l,a+l*2+2),v.length>0?v[0]-2:n-1),T=[...C?["first"]:[],...c?[]:["previous"],...y,...M>a+2?["start-ellipsis"]:a+1<n-a?[a+1]:[],...r(M,N),...N<n-a-1?["end-ellipsis"]:n-a>a?[n-a]:[],...v,...u?[]:["next"],...k?["last"]:[]],O=d=>{switch(d){case"first":return 1;case"previous":return o-1;case"next":return o+1;case"last":return n;default:return null}},I=T.map(d=>typeof d=="number"?{onClick:B=>{h(B,d)},type:"page",page:d,selected:d===o,disabled:f,"aria-current":d===o?"true":void 0}:{onClick:B=>{h(B,O(d))},type:d,page:O(d),selected:!1,disabled:f||d.indexOf("ellipsis")===-1&&(d==="next"||d==="last"?o>=n:o<=1)});return x({items:I},i)}function _t(t){return J("MuiPaginationItem",t)}const yt=Q("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),P=yt,q=X(s("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),K=X(s("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Ct=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],st=(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant],a[`size${L(e.size)}`],e.variant==="text"&&a[`text${L(e.color)}`],e.variant==="outlined"&&a[`outlined${L(e.color)}`],e.shape==="rounded"&&a.rounded,e.type==="page"&&a.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&a.ellipsis,(e.type==="previous"||e.type==="next")&&a.previousNext,(e.type==="first"||e.type==="last")&&a.firstLast]},Pt=t=>{const{classes:a,color:e,disabled:n,selected:m,size:f,shape:u,type:c,variant:b}=t,g={root:["root",`size${L(f)}`,b,u,e!=="standard"&&`${b}${L(e)}`,n&&"disabled",m&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return tt(g,_t,a)},$t=W("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:st})(({theme:t,ownerState:a})=>x({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${P.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),kt=W(rt,{name:"MuiPaginationItem",slot:"Root",overridesResolver:st})(({theme:t,ownerState:a})=>x({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${P.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${P.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:D(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${P.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:D(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${P.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:a})=>x({},a.variant==="text"&&{[`&.${P.selected}`]:x({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${P.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},{[`&.${P.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${P.selected}`]:x({},a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:D(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:D(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:D(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:D(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${P.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),It=W("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>x({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},a.size==="small"&&{fontSize:t.typography.pxToRem(18)},a.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Bt=_.forwardRef(function(a,e){const n=Y({props:a,name:"MuiPaginationItem"}),{className:m,color:f="standard",component:u,components:c={},disabled:b=!1,page:g,selected:C=!1,shape:k="circular",size:l="medium",slots:i={},type:o="page",variant:p="text"}=n,h=A(n,Ct),r=x({},n,{color:f,disabled:b,selected:C,shape:k,size:l,type:o,variant:p}),y=Z(),v=Pt(r),N=(y.direction==="rtl"?{previous:i.next||c.next||K,next:i.previous||c.previous||q,last:i.first||c.first||j,first:i.last||c.last||G}:{previous:i.previous||c.previous||q,next:i.next||c.next||K,first:i.first||c.first||j,last:i.last||c.last||G})[o];return o==="start-ellipsis"||o==="end-ellipsis"?s($t,{ref:e,ownerState:r,className:w(v.root,m),children:"…"}):$(kt,x({ref:e,ownerState:r,component:u,disabled:b,className:w(v.root,m)},h,{children:[o==="page"&&g,N?s(It,{as:N,ownerState:r,className:v.icon}):null]}))}),zt=Bt,Nt=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Rt=t=>{const{classes:a,variant:e}=t;return tt({root:["root",e],ul:["ul"]},mt,a)},Dt=W("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant]]}})({}),Ht=W("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Mt(t,a,e){return t==="page"?`${e?"":"Go to "}page ${a}`:`Go to ${t} page`}const Tt=_.forwardRef(function(a,e){const n=Y({props:a,name:"MuiPagination"}),{boundaryCount:m=1,className:f,color:u="standard",count:c=1,defaultPage:b=1,disabled:g=!1,getItemAriaLabel:C=Mt,hideNextButton:k=!1,hidePrevButton:l=!1,renderItem:i=I=>s(zt,x({},I)),shape:o="circular",showFirstButton:p=!1,showLastButton:h=!1,siblingCount:r=1,size:y="medium",variant:v="text"}=n,M=A(n,Nt),{items:N}=xt(x({},n,{componentName:"Pagination"})),T=x({},n,{boundaryCount:m,color:u,count:c,defaultPage:b,disabled:g,getItemAriaLabel:C,hideNextButton:k,hidePrevButton:l,renderItem:i,shape:o,showFirstButton:p,showLastButton:h,siblingCount:r,size:y,variant:v}),O=Rt(T);return s(Dt,x({"aria-label":"pagination navigation",className:w(O.root,f),ownerState:T,ref:e},M,{children:s(Ht,{className:O.ul,ownerState:T,children:N.map((I,d)=>s("li",{children:i(x({},I,{color:u,"aria-label":C(I.type,I.page,I.selected),shape:o,size:y,variant:v}))},d))})}))}),Ot=Tt,Lt=ft().shape({hospital_code:F().required("กรุณากรอกรหัสโรงพยาบาล"),hospital_name_th:F().required("กรุณากรอกชื่อไทยโรงพยาบาล"),hospital_name_en:F().required("กรุณากรอกชื่ออังกฤษรหัสโรงพยาบาล")});function Ut({open:t,handleDialogClose:a,hospitalId:e=null}){const[n,m]=_.useState({hospital_code:"",hospital_name_th:"",hospital_name_en:""}),[f,u]=_.useState(null);_.useEffect(()=>{g()},[t,a]);const c=()=>{b(),a()},b=()=>{m({hospital_code:"",hospital_name_th:"",hospital_name_en:""})},g=async()=>{if(e){const l=await z.get(`/hospitals/get-hospital/${e}`);l.status==200&&m({hospital_code:l.data.hospital_code,hospital_name_th:l.data.hospital_name_th,hospital_name_en:l.data.hospital_name_en})}},C=async l=>{if(e){const i=await z.put(`/hospitals/update-hospital/${e}`,{hospital_code:l.hospital_code,hospital_name_th:l.hospital_name_th,hospital_name_en:l.hospital_name_en});i.status==201&&E(i.data).then(()=>{c()})}else{const i=await z.post("/hospitals/create-hospital",{hospital_code:l.hospital_code,hospital_name_th:l.hospital_name_th,hospital_name_en:l.hospital_name_en});i.status==201&&E(i.data).then(()=>{c()})}},k=l=>{if(e){const i=setTimeout(()=>{z.post(`/hospitals/check-hospital-code-exist?hospital_id=${e}`,{hospital_code:l}).then(o=>{o.status==200&&(o.data?u(o.data):u(null))})},500);return()=>clearTimeout(i)}else{const i=setTimeout(()=>{z.post("/hospitals/check-hospital-code-exist",{hospital_code:l}).then(o=>{o.status==200&&(o.data?u(o.data):u(null))})},500);return()=>clearTimeout(i)}};return $(at,{open:t,onClose:c,fullWidth:!0,children:[s(et,{children:e?"แก้ไขโรงพยาบาล":"เพิ่มโรงพยาบาล"}),s(ot,{children:s(ht,{onSubmit:C,initialValues:n,validationSchema:Lt,enableReinitialize:!0,children:({values:l,errors:i,touched:o,handleBlur:p,handleChange:h,handleSubmit:r,isValid:y,dirty:v})=>s("form",{onSubmit:r,style:{width:"100%",marginTop:"1rem"},children:$(R,{display:"flex",flexDirection:"column",gap:"1rem",sx:{width:"100%"},children:[s(S,{fullWidth:!0,variant:"outlined",type:"text",label:"รหัสโรงพยาบาล",onBlur:p,onChange:h,onKeyUp:()=>k(l.hospital_code),value:l.hospital_code,name:"hospital_code",error:!!o.hospital_code&&!!i.hospital_code,helperText:o.hospital_code&&i.hospital_code}),f&&s(U,{pl:1.5,variant:"subtitle2",color:"#fe0000",children:f}),s(S,{fullWidth:!0,variant:"outlined",type:"text",label:"ชื่อโรงพยาบาล(ไทย)",onBlur:p,onChange:h,value:l.hospital_name_th,name:"hospital_name_th",error:!!o.hospital_name_th&&!!i.hospital_name_th,helperText:o.hospital_name_th&&i.hospital_name_th}),s(S,{fullWidth:!0,variant:"outlined",type:"text",label:"ชื่อโรงพยาบาล(อังกฤษ)",onBlur:p,onChange:h,value:l.hospital_name_en,name:"hospital_name_en",error:!!o.hospital_name_en&&!!i.hospital_name_en,helperText:o.hospital_name_en&&i.hospital_name_en}),$(R,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:2,children:[s(H,{type:"submit",color:"success",variant:"contained",disabled:!y||!v,children:"บันทัก"}),s(H,{color:"inherit",variant:"contained",onClick:c,children:"ยกเลิก"})]})]})})})})]})}function Wt({open:t,handleDialogClose:a,hospitalId:e=null}){const[n,m]=_.useState([]),[f,u]=_.useState(null),[c,b]=_.useState(0),g=12,C=ct();_.useEffect(()=>{k()},[t,a,c]);const k=async()=>{if(e){const p=await z.get(`/hospitals/get-user-in-hospital/${e}/${g}/${c}`);if(p.status==200){const h=p.data.count;u(h>g?Math.ceil(h/g):null);const r=p.data.user_hospital;let y=[];for(let v of r)y.push(v.user);m(y)}}},l=()=>{e=null,a()},i=(p,h)=>{b((h-1)*g)},o=p=>{C(`/users?user_id=${p}`),a()};return $(at,{open:t,onClose:l,fullWidth:!0,maxWidth:"xl",sx:{height:"80vh"},children:[s(et,{children:"พนักงานในโรงพยาบาล"}),s(ot,{children:$(R,{p:{xs:0,md:3},display:"flex",flexDirection:"column",gap:3,justifyContent:"center",alignItems:"center",children:[s(V,{container:!0,spacing:2,children:n==null?void 0:n.map((p,h)=>s(V,{item:!0,xs:12,md:6,lg:4,children:s(pt,{title:"ไปยังโปรไฟล์ผู้ใช้",children:$(dt,{variant:"outlined",onClick:()=>o(p.user_id),sx:{display:"flex",flexDirection:"column",gap:1,position:"relative",p:2,"&:hover":{scale:"102%",cursor:"pointer",borderColor:"#23c6c8"}},children:[$(U,{children:["รหัสพนักงาน: ",p.user_code]}),$(U,{children:["ชื่อ-นามสกุล(ไทย): ",p.user_firstname_th," ",p.user_lastname_th]}),$(U,{children:["ชื่อ-นามสกุล(อังกฤษ): ",p.user_firstname_en," ",p.user_lastname_en]})]})})},h))}),f&&s(Ot,{count:f,defaultPage:1,color:"primary",onChange:i})]})})]})}function jt(){Z();const[t,a]=_.useState([]),[e,n]=_.useState(!1),[m,f]=_.useState(!1),[u,c]=_.useState(null),b=[{name:"hospital_code",label:"รหัสโรงพยาบาล",options:{filter:!0,sort:!0}},{name:"hospital_name_th",label:"ชื่อโรงพยาบาล(ไทย)",options:{filter:!0,sort:!1}},{name:"hospital_name_en",label:"ชื่อโรงพยาบาล(อังกฤษ)",options:{filter:!0,sort:!1}},{name:"created_at",label:"เข้าร่วมเมื่อ",options:{filter:!0,sort:!1,customBodyRender:r=>s("span",{children:new Date(r).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})})}},{name:"hospital_id",label:"จัดการ",options:{filter:!0,sort:!1,customBodyRender:r=>$(R,{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:1,justifyContent:"center",alignItems:"center",width:{xs:"100%",lg:"50%"},children:[s(H,{fullWidth:!0,color:"warning",variant:"contained",onClick:()=>C(r),children:"แก้ไข"}),s(H,{fullWidth:!0,color:"secondary",variant:"contained",onClick:()=>k(r),children:"พนักงาน"}),s(H,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>l(r),children:"ลบ"})]})}}];_.useEffect(()=>{g()},[e]);const g=()=>{z.get("/hospitals/get-hospitals").then(r=>{r.status==200&&a(r.data)})},C=r=>{c(r),i()},k=r=>{c(r),p()},l=r=>{gt().then(y=>{y.isConfirmed&&z.delete(`hospitals/remove-hospital/${r}`).then(v=>{v.status==200&&E(v.data).then(()=>{g()})})})},i=()=>{n(!0)},o=()=>{n(!1),c(null)},p=()=>{f(!0)};return $(R,{display:"flex",flexDirection:"column",p:2,children:[s(U,{variant:"h5",children:"โรงพยาบาล"}),s(ut,{}),s(R,{pt:1.5,children:s(H,{variant:"contained",color:"success",onClick:i,children:"เพิ่มโรงพยาบาล"})}),s(R,{width:"100%",maxWidth:"100wh",height:"70vh",mt:3,children:s(vt,{title:"ตารางโรงพยาบาล",data:t,columns:b,options:{filterType:"checkbox"}})}),e&&s(Ut,{open:e,handleDialogClose:o,hospitalId:u}),m&&s(Wt,{open:m,handleDialogClose:()=>{f(!1),c(null)},hospitalId:u})]})}export{jt as default};
