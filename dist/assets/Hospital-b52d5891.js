import{g as K,c as Q,_ as A,u as la,d as y,e as X,b as o,s as U,f as ra,h as R,r as C,i as Y,k as Z,l as S,j as $,m as T,n as aa,a as H,B as z,o as G,p as ca,q as pa,P as da,T as W,D as ua,t as ga}from"./index-067de1a3.js";import{F as ha,T as w,B as D,c as fa,a as F}from"./formik.esm-21fb3e16.js";import{F as V,L as j,D as ta,a as ea,b as oa,c as va}from"./DataGrid-de4d3367.js";import{G as E}from"./Grid-9b3f8245.js";import{G as ma}from"./GridToolbar-bed1eca7.js";import"./index-4d501b15.js";function ba(a){return K("MuiPagination",a)}Q("MuiPagination",["root","ul","outlined","text"]);const xa=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function _a(a={}){const{boundaryCount:t=1,componentName:e="usePagination",count:i=1,defaultPage:h=1,disabled:g=!1,hideNextButton:b=!1,hidePrevButton:l=!1,onChange:x,page:s,showFirstButton:r=!1,showLastButton:f=!1,siblingCount:v=1}=a,d=A(a,xa),[c,p]=la({controlled:s,default:h,name:e,state:"page"}),m=(u,N)=>{s||p(N),x&&x(u,N)},n=(u,N)=>{const sa=N-u+1;return Array.from({length:sa},(Fa,na)=>u+na)},k=n(1,Math.min(t,i)),_=n(Math.max(i-t+1,t+1),i),O=Math.max(Math.min(c-v,i-t-v*2-1),t+2),B=Math.min(Math.max(c+v,t+v*2+2),_.length>0?_[0]-2:i-1),M=[...r?["first"]:[],...l?[]:["previous"],...k,...O>t+2?["start-ellipsis"]:t+1<i-t?[t+1]:[],...n(O,B),...B<i-t-1?["end-ellipsis"]:i-t>t?[i-t]:[],..._,...b?[]:["next"],...f?["last"]:[]],L=u=>{switch(u){case"first":return 1;case"previous":return c-1;case"next":return c+1;case"last":return i;default:return null}},I=M.map(u=>typeof u=="number"?{onClick:N=>{m(N,u)},type:"page",page:u,selected:u===c,disabled:g,"aria-current":u===c?"true":void 0}:{onClick:N=>{m(N,L(u))},type:u,page:L(u),selected:!1,disabled:g||u.indexOf("ellipsis")===-1&&(u==="next"||u==="last"?c>=i:c<=1)});return y({items:I},d)}function ya(a){return K("MuiPaginationItem",a)}const Ca=Q("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),P=Ca,q=X(o("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),J=X(o("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Pa=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],ia=(a,t)=>{const{ownerState:e}=a;return[t.root,t[e.variant],t[`size${T(e.size)}`],e.variant==="text"&&t[`text${T(e.color)}`],e.variant==="outlined"&&t[`outlined${T(e.color)}`],e.shape==="rounded"&&t.rounded,e.type==="page"&&t.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&t.ellipsis,(e.type==="previous"||e.type==="next")&&t.previousNext,(e.type==="first"||e.type==="last")&&t.firstLast]},$a=a=>{const{classes:t,color:e,disabled:i,selected:h,size:g,shape:b,type:l,variant:x}=a,s={root:["root",`size${T(g)}`,x,b,e!=="standard"&&`${x}${T(e)}`,i&&"disabled",h&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return aa(s,ya,t)},ka=U("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:ia})(({theme:a,ownerState:t})=>y({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,height:"auto",[`&.${P.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)})),Ia=U(ra,{name:"MuiPaginationItem",slot:"Root",overridesResolver:ia})(({theme:a,ownerState:t})=>y({},a.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(a.vars||a).palette.text.primary,[`&.${P.focusVisible}`]:{backgroundColor:(a.vars||a).palette.action.focus},[`&.${P.disabled}`]:{opacity:(a.vars||a).palette.action.disabledOpacity},transition:a.transitions.create(["color","background-color"],{duration:a.transitions.duration.short}),"&:hover":{backgroundColor:(a.vars||a).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.selected}`]:{backgroundColor:(a.vars||a).palette.action.selected,"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selected} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.hoverOpacity}))`:R(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(a.vars||a).palette.action.selected}},[`&.${P.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette.action.selected} / calc(${a.vars.palette.action.selectedOpacity} + ${a.vars.palette.action.focusOpacity}))`:R(a.palette.action.selected,a.palette.action.selectedOpacity+a.palette.action.focusOpacity)},[`&.${P.disabled}`]:{opacity:1,color:(a.vars||a).palette.action.disabled,backgroundColor:(a.vars||a).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:a.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(a.vars||a).shape.borderRadius}),({theme:a,ownerState:t})=>y({},t.variant==="text"&&{[`&.${P.selected}`]:y({},t.color!=="standard"&&{color:(a.vars||a).palette[t.color].contrastText,backgroundColor:(a.vars||a).palette[t.color].main,"&:hover":{backgroundColor:(a.vars||a).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(a.vars||a).palette[t.color].main}},[`&.${P.focusVisible}`]:{backgroundColor:(a.vars||a).palette[t.color].dark}},{[`&.${P.disabled}`]:{color:(a.vars||a).palette.action.disabled}})},t.variant==="outlined"&&{border:a.vars?`1px solid rgba(${a.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${a.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${P.selected}`]:y({},t.color!=="standard"&&{color:(a.vars||a).palette[t.color].main,border:`1px solid ${a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / 0.5)`:R(a.palette[t.color].main,.5)}`,backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / ${a.vars.palette.action.activatedOpacity})`:R(a.palette[t.color].main,a.palette.action.activatedOpacity),"&:hover":{backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:R(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${P.focusVisible}`]:{backgroundColor:a.vars?`rgba(${a.vars.palette[t.color].mainChannel} / calc(${a.vars.palette.action.activatedOpacity} + ${a.vars.palette.action.focusOpacity}))`:R(a.palette[t.color].main,a.palette.action.activatedOpacity+a.palette.action.focusOpacity)}},{[`&.${P.disabled}`]:{borderColor:(a.vars||a).palette.action.disabledBackground,color:(a.vars||a).palette.action.disabled}})})),Na=U("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(a,t)=>t.icon})(({theme:a,ownerState:t})=>y({fontSize:a.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:a.typography.pxToRem(18)},t.size==="large"&&{fontSize:a.typography.pxToRem(22)})),Ba=C.forwardRef(function(t,e){const i=Y({props:t,name:"MuiPaginationItem"}),{className:h,color:g="standard",component:b,components:l={},disabled:x=!1,page:s,selected:r=!1,shape:f="circular",size:v="medium",slots:d={},type:c="page",variant:p="text"}=i,m=A(i,Pa),n=y({},i,{color:g,disabled:x,selected:r,shape:f,size:v,type:c,variant:p}),k=Z(),_=$a(n),B=(k.direction==="rtl"?{previous:d.next||l.next||J,next:d.previous||l.previous||q,last:d.first||l.first||V,first:d.last||l.last||j}:{previous:d.previous||l.previous||q,next:d.next||l.next||J,first:d.first||l.first||V,last:d.last||l.last||j})[c];return c==="start-ellipsis"||c==="end-ellipsis"?o(ka,{ref:e,ownerState:n,className:S(_.root,h),children:"…"}):$(Ia,y({ref:e,ownerState:n,component:b,disabled:x,className:S(_.root,h)},m,{children:[c==="page"&&s,B?o(Na,{as:B,ownerState:n,className:_.icon}):null]}))}),za=Ba,Ra=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Da=a=>{const{classes:t,variant:e}=a;return aa({root:["root",e],ul:["ul"]},ba,t)},Ha=U("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(a,t)=>{const{ownerState:e}=a;return[t.root,t[e.variant]]}})({}),Oa=U("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(a,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Ma(a,t,e){return a==="page"?`${e?"":"Go to "}page ${t}`:`Go to ${a} page`}const La=C.forwardRef(function(t,e){const i=Y({props:t,name:"MuiPagination"}),{boundaryCount:h=1,className:g,color:b="standard",count:l=1,defaultPage:x=1,disabled:s=!1,getItemAriaLabel:r=Ma,hideNextButton:f=!1,hidePrevButton:v=!1,renderItem:d=I=>o(za,y({},I)),shape:c="circular",showFirstButton:p=!1,showLastButton:m=!1,siblingCount:n=1,size:k="medium",variant:_="text"}=i,O=A(i,Ra),{items:B}=_a(y({},i,{componentName:"Pagination"})),M=y({},i,{boundaryCount:h,color:b,count:l,defaultPage:x,disabled:s,getItemAriaLabel:r,hideNextButton:f,hidePrevButton:v,renderItem:d,shape:c,showFirstButton:p,showLastButton:m,siblingCount:n,size:k,variant:_}),L=Da(M);return o(Ha,y({"aria-label":"pagination navigation",className:S(L.root,g),ownerState:M,ref:e},O,{children:o(Oa,{className:L.ul,ownerState:M,children:B.map((I,u)=>o("li",{children:d(y({},I,{color:b,"aria-label":r(I.type,I.page,I.selected),shape:c,size:k,variant:_}))},u))})}))}),Ta=La,Ua=fa().shape({hospital_code:F().required("กรุณากรอกรหัสโรงพยาบาล"),hospital_name_th:F().required("กรุณากรอกชื่อไทยโรงพยาบาล"),hospital_name_en:F().required("กรุณากรอกชื่ออังกฤษรหัสโรงพยาบาล")});function Wa({open:a,handleDialogClose:t,hospitalId:e=null}){const[i,h]=C.useState({hospital_code:"",hospital_name_th:"",hospital_name_en:""});C.useEffect(()=>{l()},[a,t]);const g=()=>{b(),t()},b=()=>{h({hospital_code:"",hospital_name_th:"",hospital_name_en:""})},l=async()=>{if(e){const s=await H.get(`/hospitals/get-hospital/${e}`);s.status==200&&h({hospital_code:s.data.hospital_code,hospital_name_th:s.data.hospital_name_th,hospital_name_en:s.data.hospital_name_en})}};return $(ta,{open:a,onClose:g,fullWidth:!0,children:[o(ea,{children:e?"แก้ไขโรงพยาบาล":"เพิ่มโรงพยาบาล"}),o(oa,{children:o(ha,{onSubmit:async s=>{if(e){const r=await H.put(`/hospitals/update-hospital/${e}`,{hospital_code:s.hospital_code,hospital_name_th:s.hospital_name_th,hospital_name_en:s.hospital_name_en});r.status==201&&G(r.data).then(()=>{g()})}else{const r=await H.post("/hospitals/create-hospital",{hospital_code:s.hospital_code,hospital_name_th:s.hospital_name_th,hospital_name_en:s.hospital_name_en});r.status==201&&G(r.data).then(()=>{g()})}},initialValues:i,validationSchema:Ua,enableReinitialize:!0,children:({values:s,errors:r,touched:f,handleBlur:v,handleChange:d,handleSubmit:c,isValid:p,dirty:m})=>o("form",{onSubmit:c,style:{width:"100%",marginTop:"1rem"},children:$(z,{display:"flex",flexDirection:"column",gap:"1rem",sx:{width:"100%"},children:[o(w,{fullWidth:!0,variant:"outlined",type:"text",label:"รหัสโรงพยาบาล",onBlur:v,onChange:d,value:s.hospital_code,name:"hospital_code",error:!!f.hospital_code&&!!r.hospital_code,helperText:f.hospital_code&&r.hospital_code}),o(w,{fullWidth:!0,variant:"outlined",type:"text",label:"ชื่อโรงพยาบาล(ไทย)",onBlur:v,onChange:d,value:s.hospital_name_th,name:"hospital_name_th",error:!!f.hospital_name_th&&!!r.hospital_name_th,helperText:f.hospital_name_th&&r.hospital_name_th}),o(w,{fullWidth:!0,variant:"outlined",type:"text",label:"ชื่อโรงพยาบาล(อังกฤษ)",onBlur:v,onChange:d,value:s.hospital_name_en,name:"hospital_name_en",error:!!f.hospital_name_en&&!!r.hospital_name_en,helperText:f.hospital_name_en&&r.hospital_name_en}),$(z,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:2,children:[o(D,{type:"submit",color:"success",variant:"contained",disabled:!p||!m,children:"บันทัก"}),o(D,{color:"inherit",variant:"contained",onClick:g,children:"ยกเลิก"})]})]})})})})]})}function wa({open:a,handleDialogClose:t,hospitalId:e=null}){const[i,h]=C.useState([]),[g,b]=C.useState(null),[l,x]=C.useState(0),s=12,r=ca();C.useEffect(()=>{f()},[a,t,l]);const f=async()=>{if(e){const p=await H.get(`/hospitals/get-user-in-hospital/${e}/${s}/${l}`);if(p.status==200){const m=p.data.count;b(m>s?Math.ceil(m/s):null);const n=p.data.user_hospital;let k=[];for(let _ of n)k.push(_.user);h(k)}}},v=()=>{e=null,t()},d=(p,m)=>{x((m-1)*s)},c=p=>{r(`/users?user_id=${p}`),t()};return $(ta,{open:a,onClose:v,fullWidth:!0,maxWidth:"xl",sx:{height:"80vh"},children:[o(ea,{children:"พนักงานในโรงพยาบาล"}),o(oa,{children:$(z,{p:3,display:"flex",flexDirection:"column",gap:3,justifyContent:"center",alignItems:"center",children:[o(E,{container:!0,spacing:2,children:i==null?void 0:i.map((p,m)=>o(E,{item:!0,xs:4,children:o(pa,{title:"ไปยังโปรไฟล์ผู้ใช้",children:$(da,{variant:"outlined",onClick:()=>c(p.user_id),sx:{display:"flex",flexDirection:"column",gap:1,position:"relative",p:2,"&:hover":{scale:"102%",cursor:"pointer",borderColor:"#23c6c8"}},children:[$(W,{children:["รหัสพนักงาน: ",p.user_code]}),$(W,{children:["ชื่อ-นามสกุล(ไทย): ",p.user_firstname_th," ",p.user_lastname_th]}),$(W,{children:["ชื่อ-นามสกุล(อังกฤษ): ",p.user_firstname_en," ",p.user_lastname_en]})]})})},m))}),g&&o(Ta,{count:g,defaultPage:1,color:"primary",onChange:d})]})})]})}function qa(){Z();const[a,t]=C.useState(null),[e,i]=C.useState(!1),[h,g]=C.useState(!1),[b,l]=C.useState(null),x=[{field:"hospital_code",headerName:"รหัสโรงพยาบาล",width:200},{field:"hospital_name_th",headerName:"ชื่อไทย",flex:1},{field:"hospital_name_en",headerName:"ชื่ออังกฤษ",flex:1},{field:"created_at",headerName:"เพิ่มเมื่อ",width:200,valueFormatter:n=>new Date(n.value).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})},{field:"hospital_id",headerName:"จัดการ",flex:1,renderCell:n=>$(z,{display:"flex",flexDirection:"row",gap:1,justifyContent:"center",alignItems:"center",width:"50%",children:[o(D,{fullWidth:!0,color:"warning",variant:"contained",onClick:()=>r(n.value),children:"แก้ไข"}),o(D,{fullWidth:!0,color:"secondary",variant:"contained",onClick:()=>f(n.value),children:"พนักงาน"}),o(D,{fullWidth:!0,color:"error",variant:"contained",onClick:()=>v(n.value),children:"ลบ"})]})}];C.useEffect(()=>{s()},[e]);const s=()=>{H.get("/hospitals/get-hospitals").then(n=>{n.status==200&&t(n.data)})},r=n=>{l(n),d()},f=n=>{l(n),p()},v=n=>{ga().then(k=>{k.isConfirmed&&H.delete(`hospitals/remove-hospital/${n}`).then(_=>{_.status==200&&G(_.data).then(()=>{s()})})})},d=()=>{i(!0)},c=()=>{i(!1),l(null)},p=()=>{g(!0)};return $(z,{display:"flex",flexDirection:"column",p:2,children:[o(W,{variant:"h5",children:"โรงพยาบาล"}),o(ua,{}),o(z,{pt:1.5,children:o(D,{variant:"contained",color:"success",onClick:d,children:"เพิ่มโรงพยาบาล"})}),o(z,{width:"100%",maxWidth:"100wh",height:"70vh",mt:3,children:a&&o(va,{rows:a,columns:x,getRowId:n=>n.hospital_id,components:{Toolbar:ma},showCellVerticalBorder:!0,showColumnVerticalBorder:!0})}),e&&o(Wa,{open:e,handleDialogClose:c,hospitalId:b}),h&&o(wa,{open:h,handleDialogClose:()=>{g(!1),l(null)},hospitalId:b})]})}export{qa as default};
